# 마이크로 서비스 아키텍처

![모놀리식 아키텍처](./Architectures.jpg)

## Monolithic Architecture?

모놀리식 아키텍처는 **소프트웨어의 모든 구성요소가 하나의 프로젝트에 통합**되어 있는 형태를 말한다.

아직까지 많은 소프트웨어가 모놀리식 아키텍처로 구성되어 있고, 소규모 프로젝트에는 여전히 모놀리식 아키텍처가 합리적인 선택이다.

하지만 일정 규모 이상의 서비스, 혹은 수백명의 개발자가 투입되는 프로젝트에서 모놀리식 아키텍처는 다음과 같은 한계를 보인다.

- **부분 장애가 전체 서비스의 장애로 확대**된다.
    - 모든 서비스가 강하게 결합되어 있기 때문에, 장애가 전파된다.
- **선택적인 확장이 불가능**하다.
    - 주문 서비스가 폭증하는 경우, 전체 서비스를 확장해야 한다. 
- **빌드, 테스트에 많은 시간이 소요**된다.
    - 사소한 변경에도 전체 소프트웨어를 다시 빌드하고, 테스트해야 한다.
- 특정 **언어와 프레임워크에 종속**된다.
    - Spring Framework를 사용했다면, 끝까지 동일한 프레임워크르 사용해야 한다.
    - 블록체인 분야에서 강점을 가지는 JavaScript를 사용할 수 없다.
    - 기계학습 분야에서 강점을 가지는 Python을 사용할 수 없다.

<br>

## Micro-Service Architecture?

위와 같은 전통적인 모놀리식 아키텍처의 한계를 보완하기 위해 등장한 것이 MSA이다.

마이크로서비스 아키텍처는 다음과 같은 특징을 가진다.

- 여러 개의 마이크로서비스를 연결해 단일 소프트웨어를 구성한다.
    - 마이크로서비스는 **API를 통해 서로와 통신**할 수 있다.
- 각각의 서비스는 **하나의 기능만을 담당**하며, 서로에게 의존하지 않는다.
- 각각의 서비스는 **독립적으로 배포**될 수 있다.
- 각각의 서비스는 **다른 언어와 프레임워크를 사용**할 수 있다.

마이크로서비스 아키텍처는 소프트웨어를 단일 기능을 담당하는 여러 개의 서비스로 분리해 구현하는 방식으로, 확장과 유지보수에 필요한 비용을 획기적으로 줄일 수 있다.

마이크로서비스 아키텍처의 장점과 단점은 아래와 같다.

### 마이크로서비스 아키텍처의 장점

- **부분 장애는 부분 장애**이다.
    - 개별 서비스에서 발생한 장애는 전체 시스템에 영향을 주지 않는다.
- **선택적인 확장이 가능**하다.
    - 트래픽이 폭증한 일부 서비스만 부분적으로 확장할 수 있다.
- **빌드와 테스트에 소요되는 시간이 감소**한다.
    - 서비스 단위로 배포할 수 있으므로, 전체 소프트웨어를 빌드하고 테스트하지 않는다.
- **팀 단위의 기술스택 선택이 가능**하다.
    - 웹서버 개발은 Java Spring, 블록체인 개발은 Node.js를 사용할 수 있다.

### 마이크로서비스 아키텍처의 단점

- 모놀리식 아키텍처에 비해 내부 구성이 복잡하다.
- 서비스 간의 통신이 필요하기 때문에, **통신 지연이 발생**할 수 있다.
- 데이터 관리가 어렵다.
    - 데이터가 여러 서비스에 걸쳐 분산되어, **한번에 조회하는 것이 불가능**하다.
    - Apache Kafka 등의 **데이터 파이프라인을 구축**해야 한다.
